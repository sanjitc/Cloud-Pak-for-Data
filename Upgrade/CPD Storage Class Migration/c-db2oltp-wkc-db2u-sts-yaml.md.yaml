metadata:
  annotations:
    cloudpakId: eb9998dcc5d24e3eb5b6fb488f750fe2
    cloudpakInstanceId: 66873431-a366-4a8c-a87e-aa4e5190c234
    cloudpakName: IBM Cloud Pak for Data
    databases.cloud.ibm.com/converged-replicas: "1"
    productChargedContainers: All
    productCloudpakRatio: "1:1"
    productID: eb9998dcc5d24e3eb5b6fb488f750fe2
    productMetric: VIRTUAL_PROCESSOR_CORE
    productName: IBM Watson Knowledge Catalog for IBM Cloud Pak for Data
    productVersion: 11.5.9.0
  creationTimestamp: "2023-08-19T12:43:29Z"
  generation: 13
  labels:
    app: db2oltp-wkc
    certmanager.k8s.io/time-restarted: 2024-7-26.135644
    component: db2oltp
    db2u/cpdbr: db2u
    formation_id: db2oltp-wkc
    icpdsupport/addOnId: wkc
    icpdsupport/app: api
    icpdsupport/podSelector: db2u-log
    icpdsupport/serviceInstanceId: wkc
    migration.openshift.io/migrated-by-migmigration: 89c5f403-07e8-4069-9fdb-6855e7b7d321
    migration.openshift.io/migrated-by-migplan: 300f1a84-ec3d-4b34-a837-646286611537
    role: db
    type: engine
    velero.io/backup-name: migration-512d9-initial-tstzm
    velero.io/restore-name: migration-512d9-final-nm2k2
  managedFields:
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:spec:
        f:replicas: {}
    manager: oc
    operation: Update
    subresource: scale
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          .: {}
          f:cloudpakId: {}
          f:cloudpakInstanceId: {}
          f:cloudpakName: {}
          f:databases.cloud.ibm.com/converged-replicas: {}
          f:productChargedContainers: {}
          f:productCloudpakRatio: {}
          f:productID: {}
          f:productMetric: {}
          f:productName: {}
        f:labels:
          .: {}
          f:app: {}
          f:component: {}
          f:db2u/cpdbr: {}
          f:formation_id: {}
          f:icpdsupport/addOnId: {}
          f:icpdsupport/app: {}
          f:icpdsupport/podSelector: {}
          f:icpdsupport/serviceInstanceId: {}
          f:migration.openshift.io/migrated-by-migmigration: {}
          f:migration.openshift.io/migrated-by-migplan: {}
          f:role: {}
          f:type: {}
          f:velero.io/backup-name: {}
          f:velero.io/restore-name: {}
      f:spec:
        f:podManagementPolicy: {}
        f:revisionHistoryLimit: {}
        f:selector: {}
        f:serviceName: {}
        f:template:
          f:metadata:
            f:annotations:
              .: {}
              f:cloudpakId: {}
              f:cloudpakInstanceId: {}
              f:cloudpakName: {}
              f:productChargedContainers: {}
              f:productCloudpakRatio: {}
              f:productID: {}
              f:productMetric: {}
              f:productName: {}
            f:labels:
              .: {}
              f:app: {}
              f:component: {}
              f:db2u/cpdbr: {}
              f:formation_id: {}
              f:icpdsupport/addOnId: {}
              f:icpdsupport/app: {}
              f:icpdsupport/podSelector: {}
              f:icpdsupport/serviceInstanceId: {}
              f:role: {}
              f:type: {}
          f:spec:
            f:affinity:
              .: {}
              f:podAntiAffinity: {}
            f:containers:
              k:{"name":"db2u"}:
                .: {}
                f:env:
                  .: {}
                  k:{"name":"CPU_LIMIT"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:resourceFieldRef: {}
                  k:{"name":"DB2U_API_CERT_FILE"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_CONFIGMAP_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_DATABASE_BACKEND"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_ENDPOINT"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_KEY_FILE"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"MEMORY_LIMIT"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:resourceFieldRef: {}
                  k:{"name":"MEMORY_REQUEST"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:resourceFieldRef: {}
                  k:{"name":"POD"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:fieldRef: {}
                  k:{"name":"POD_NAME"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:fieldRef: {}
                  k:{"name":"POD_NAMESPACE"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:fieldRef: {}
                  k:{"name":"SERVICE_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                f:imagePullPolicy: {}
                f:lifecycle:
                  .: {}
                  f:preStop:
                    .: {}
                    f:exec:
                      .: {}
                      f:command: {}
                f:livenessProbe:
                  .: {}
                  f:failureThreshold: {}
                  f:httpGet:
                    .: {}
                    f:path: {}
                    f:port: {}
                    f:scheme: {}
                  f:periodSeconds: {}
                  f:successThreshold: {}
                f:name: {}
                f:ports:
                  .: {}
                  k:{"containerPort":50000,"protocol":"TCP"}:
                    .: {}
                    f:containerPort: {}
                    f:name: {}
                    f:protocol: {}
                  k:{"containerPort":50001,"protocol":"TCP"}:
                    .: {}
                    f:containerPort: {}
                    f:name: {}
                    f:protocol: {}
                  k:{"containerPort":50052,"protocol":"TCP"}:
                    .: {}
                    f:containerPort: {}
                    f:name: {}
                    f:protocol: {}
                f:readinessProbe:
                  .: {}
                  f:failureThreshold: {}
                  f:periodSeconds: {}
                  f:successThreshold: {}
                f:resources:
                  .: {}
                  f:limits: {}
                  f:requests: {}
                f:securityContext:
                  .: {}
                  f:allowPrivilegeEscalation: {}
                  f:capabilities:
                    .: {}
                    f:drop: {}
                  f:runAsUser: {}
                f:startupProbe:
                  .: {}
                  f:failureThreshold: {}
                  f:initialDelaySeconds: {}
                  f:periodSeconds: {}
                  f:successThreshold: {}
                f:terminationMessagePath: {}
                f:terminationMessagePolicy: {}
                f:volumeMounts:
                  .: {}
                  k:{"mountPath":"/db2u/license/"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/dev/shm"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                  k:{"mountPath":"/mnt/backup"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                  k:{"mountPath":"/mnt/bludata0"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                  k:{"mountPath":"/mnt/blumeta0"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                  k:{"mountPath":"/mnt/blumeta0/configmap/db2/db-cfg"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/mnt/blumeta0/configmap/db2/dbm-cfg"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/mnt/blumeta0/configmap/db2/registry"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/mnt/blumeta0/configmap/db2u"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/mnt/local"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                  k:{"mountPath":"/run"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                  k:{"mountPath":"/secrets/certs/db2u-api"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/secrets/certs/wv-rest"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/secrets/db2instancepwd"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/secrets/db2ssl"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/secrets/external/zen-service-broker-secret"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/secrets/sshkeys/db2instusr"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/secrets/sshkeys/db2uadm"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/secrets/sshkeys/db2uhausr"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
            f:dnsConfig:
              .: {}
              f:options: {}
            f:dnsPolicy: {}
            f:initContainers:
              .: {}
              k:{"name":"init-kernel"}:
                .: {}
                f:command: {}
                f:env:
                  .: {}
                  k:{"name":"DB2U_API_CERT_FILE"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_CONFIGMAP_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_DATABASE_BACKEND"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_ENDPOINT"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_KEY_FILE"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"MEMORY_LIMIT"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:resourceFieldRef: {}
                  k:{"name":"POD_NAME"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:fieldRef: {}
                  k:{"name":"POD_NAMESPACE"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:fieldRef: {}
                  k:{"name":"SERVICE_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"SERVICENAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                f:imagePullPolicy: {}
                f:name: {}
                f:resources:
                  .: {}
                  f:limits:
                    .: {}
                    f:cpu: {}
                    f:ephemeral-storage: {}
                    f:memory: {}
                  f:requests:
                    .: {}
                    f:cpu: {}
                    f:ephemeral-storage: {}
                    f:memory: {}
                f:securityContext:
                  .: {}
                  f:allowPrivilegeEscalation: {}
                  f:capabilities:
                    .: {}
                    f:drop: {}
                  f:privileged: {}
                  f:readOnlyRootFilesystem: {}
                  f:runAsUser: {}
                f:terminationMessagePath: {}
                f:terminationMessagePolicy: {}
                f:volumeMounts:
                  .: {}
                  k:{"mountPath":"/mnt/blumeta0"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
              k:{"name":"init-labels"}:
                .: {}
                f:command: {}
                f:env:
                  .: {}
                  k:{"name":"DB2TYPE"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_CERT_FILE"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_CONFIGMAP_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_DATABASE_BACKEND"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_ENDPOINT"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"DB2U_API_KEY_FILE"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"MLN_TOTAL"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"POD_NAME"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:fieldRef: {}
                  k:{"name":"POD_NAMESPACE"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:fieldRef: {}
                  k:{"name":"REPLICAS"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"SERVICE_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"SERVICENAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                f:imagePullPolicy: {}
                f:name: {}
                f:resources:
                  .: {}
                  f:limits:
                    .: {}
                    f:cpu: {}
                    f:ephemeral-storage: {}
                    f:memory: {}
                  f:requests:
                    .: {}
                    f:cpu: {}
                    f:ephemeral-storage: {}
                    f:memory: {}
                f:securityContext:
                  .: {}
                  f:allowPrivilegeEscalation: {}
                  f:capabilities:
                    .: {}
                    f:drop: {}
                  f:privileged: {}
                  f:readOnlyRootFilesystem: {}
                  f:runAsUser: {}
                f:terminationMessagePath: {}
                f:terminationMessagePolicy: {}
                f:volumeMounts:
                  .: {}
                  k:{"mountPath":"/mnt/blumeta0"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                  k:{"mountPath":"/mnt/blumeta0/configmap/db2u"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
            f:restartPolicy: {}
            f:schedulerName: {}
            f:securityContext:
              .: {}
              f:fsGroup: {}
              f:runAsNonRoot: {}
            f:serviceAccount: {}
            f:serviceAccountName: {}
            f:terminationGracePeriodSeconds: {}
            f:volumes:
              .: {}
              k:{"name":"backup"}:
                .: {}
                f:name: {}
                f:persistentVolumeClaim:
                  .: {}
                  f:claimName: {}
              k:{"name":"certs-db2u-api"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
              k:{"name":"certs-wv-rest"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
              k:{"name":"data"}:
                .: {}
                f:name: {}
                f:persistentVolumeClaim:
                  .: {}
                  f:claimName: {}
              k:{"name":"db2dbconfig"}:
                .: {}
                f:configMap:
                  .: {}
                  f:defaultMode: {}
                  f:name: {}
                f:name: {}
              k:{"name":"db2dbmconfig"}:
                .: {}
                f:configMap:
                  .: {}
                  f:defaultMode: {}
                  f:name: {}
                f:name: {}
              k:{"name":"db2regconfig"}:
                .: {}
                f:configMap:
                  .: {}
                  f:defaultMode: {}
                  f:name: {}
                f:name: {}
              k:{"name":"db2ssl"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
              k:{"name":"db2u-lic"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
              k:{"name":"db2uconfig"}:
                .: {}
                f:configMap:
                  .: {}
                  f:defaultMode: {}
                  f:name: {}
                f:name: {}
              k:{"name":"dshm"}:
                .: {}
                f:emptyDir:
                  .: {}
                  f:medium: {}
                f:name: {}
              k:{"name":"instancepassword"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
              k:{"name":"local"}:
                .: {}
                f:emptyDir: {}
                f:name: {}
              k:{"name":"meta"}:
                .: {}
                f:name: {}
                f:persistentVolumeClaim:
                  .: {}
                  f:claimName: {}
              k:{"name":"runvol"}:
                .: {}
                f:emptyDir:
                  .: {}
                  f:medium: {}
                  f:sizeLimit: {}
                f:name: {}
              k:{"name":"sshkeys-db2instusr"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
              k:{"name":"sshkeys-db2uadm"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
              k:{"name":"sshkeys-db2uhausr"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
              k:{"name":"zen-service-broker-secret"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:secretName: {}
        f:updateStrategy:
          f:rollingUpdate:
            .: {}
            f:partition: {}
          f:type: {}
    manager: velero-server
    operation: Update
    time: "2023-08-19T12:43:29Z"
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:spec:
        f:template:
          f:spec:
            f:containers:
              k:{"name":"db2u"}:
                f:resources:
                  f:limits:
                    f:ephemeral-storage: {}
    manager: kubectl-edit
    operation: Update
    time: "2024-08-01T13:50:48Z"
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          f:productVersion: {}
        f:labels:
          f:certmanager.k8s.io/time-restarted: {}
        f:ownerReferences:
          .: {}
          k:{"uid":"04463414-ffe1-4961-97f0-24459fd6b6e5"}: {}
      f:spec:
        f:template:
          f:metadata:
            f:annotations:
              f:productVersion: {}
            f:labels:
              f:certmanager.k8s.io/time-restarted: {}
          f:spec:
            f:affinity:
              f:nodeAffinity:
                .: {}
                f:requiredDuringSchedulingIgnoredDuringExecution: {}
            f:containers:
              k:{"name":"db2u"}:
                f:env:
                  k:{"name":"DB2_NGINX_SVC_HOST_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"FORMATION_ID"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"ODF_SUPPORT"}:
                    .: {}
                    f:name: {}
                  k:{"name":"V2"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                f:image: {}
                f:livenessProbe:
                  f:timeoutSeconds: {}
                f:readinessProbe:
                  f:httpGet:
                    .: {}
                    f:path: {}
                    f:port: {}
                    f:scheme: {}
                  f:timeoutSeconds: {}
                f:resources:
                  f:limits:
                    f:cpu: {}
                    f:memory: {}
                  f:requests:
                    f:cpu: {}
                    f:ephemeral-storage: {}
                    f:memory: {}
                f:securityContext:
                  f:privileged: {}
                f:startupProbe:
                  f:httpGet:
                    .: {}
                    f:path: {}
                    f:port: {}
                    f:scheme: {}
                  f:timeoutSeconds: {}
                f:volumeMounts:
                  k:{"mountPath":"/mnt/blumeta0/configmap/db2/ats"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/secrets/hivepwd"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/secrets/kp"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
            f:initContainers:
              k:{"name":"init-kernel"}:
                f:env:
                  k:{"name":"DB2_NGINX_SVC_HOST_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                f:image: {}
              k:{"name":"init-labels"}:
                f:env:
                  k:{"name":"DB2_NGINX_SVC_HOST_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"FORMATION_ID"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                f:image: {}
            f:securityContext:
              f:seccompProfile:
                .: {}
                f:type: {}
              f:sysctls: {}
            f:tolerations: {}
            f:volumes:
              k:{"name":"db2u-ats"}:
                .: {}
                f:configMap:
                  .: {}
                  f:defaultMode: {}
                  f:name: {}
                f:name: {}
              k:{"name":"hive"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:optional: {}
                  f:secretName: {}
              k:{"name":"kp-secret-file"}:
                .: {}
                f:name: {}
                f:secret:
                  .: {}
                  f:defaultMode: {}
                  f:optional: {}
                  f:secretName: {}
    manager: manager
    operation: Update
    time: "2024-08-22T22:32:34Z"
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:status:
        f:availableReplicas: {}
        f:collisionCount: {}
        f:currentReplicas: {}
        f:currentRevision: {}
        f:observedGeneration: {}
        f:readyReplicas: {}
        f:replicas: {}
        f:updateRevision: {}
        f:updatedReplicas: {}
    manager: kube-controller-manager
    operation: Update
    subresource: status
    time: "2024-08-28T19:47:47Z"
  name: c-db2oltp-wkc-db2u
  namespace: hptv-prodcloudpak
  ownerReferences:
  - apiVersion: db2u.databases.ibm.com/v1
    kind: Formation
    name: db2oltp-wkc
    uid: 04463414-ffe1-4961-97f0-24459fd6b6e5
  resourceVersion: "1017650293"
  uid: 0999ce88-809b-4b9a-b4a2-744a39300ff9
spec:
  podManagementPolicy: Parallel
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app: db2oltp-wkc
      component: db2oltp
      db2u/cpdbr: db2u
      formation_id: db2oltp-wkc
      icpdsupport/addOnId: wkc
      icpdsupport/app: api
      icpdsupport/podSelector: db2u-log
      icpdsupport/serviceInstanceId: wkc
      role: db
      type: engine
  serviceName: c-db2oltp-wkc-db2u-internal
  template:
    metadata:
      annotations:
        cloudpakId: eb9998dcc5d24e3eb5b6fb488f750fe2
        cloudpakInstanceId: 66873431-a366-4a8c-a87e-aa4e5190c234
        cloudpakName: IBM Cloud Pak for Data
        productChargedContainers: All
        productCloudpakRatio: "1:1"
        productID: eb9998dcc5d24e3eb5b6fb488f750fe2
        productMetric: VIRTUAL_PROCESSOR_CORE
        productName: IBM Watson Knowledge Catalog for IBM Cloud Pak for Data
        productVersion: 11.5.9.0
      creationTimestamp: null
      labels:
        app: db2oltp-wkc
        certmanager.k8s.io/time-restarted: 2024-7-26.135644
        component: db2oltp
        db2u/cpdbr: db2u
        formation_id: db2oltp-wkc
        icpdsupport/addOnId: wkc
        icpdsupport/app: api
        icpdsupport/podSelector: db2u-log
        icpdsupport/serviceInstanceId: wkc
        role: db
        type: engine
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: icp4data
                operator: In
                values:
                - wkc_db2u
        podAntiAffinity: {}
      containers:
      - env:
        - name: POD
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.labels['name']
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: MEMORY_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.memory
        - name: MEMORY_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.memory
        - name: SERVICE_NAME
          value: c-db2oltp-wkc-db2u-internal
        - name: DB2U_API_ENDPOINT
          value: c-db2oltp-wkc-db2u-internal.hptv-prodcloudpak.svc:50052
        - name: DB2U_API_DATABASE_BACKEND
          value: k8s
        - name: DB2U_API_CONFIGMAP_NAME
          value: c-db2oltp-wkc-db2u-api
        - name: DB2U_API_KEY_FILE
          value: /secrets/certs/db2u-api/tls.key
        - name: DB2U_API_CERT_FILE
          value: /secrets/certs/db2u-api/tls.crt
        - name: CPU_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.cpu
        - name: ODF_SUPPORT
        - name: FORMATION_ID
          value: c-db2oltp-wkc-db2u
        - name: V2
          value: "false"
        - name: DB2_NGINX_SVC_HOST_NAME
          value: https://internal-nginx-svc:12443
        image: icr.io/db2u/db2u.restricted@sha256:cb6a49cbd036a8c3cae47e1d5c969be3274ac6864e1dfb73d75a175fb2fe0fd3
        imagePullPolicy: IfNotPresent
        lifecycle:
          preStop:
            exec:
              command:
              - /bin/bash
              - -cl
              - /usr/bin/stop; touch /db2u/tmp/.exit_container
        livenessProbe:
          failureThreshold: 5
          httpGet:
            path: /v1/db2/health
            port: 50052
            scheme: HTTPS
          periodSeconds: 60
          successThreshold: 1
          timeoutSeconds: 60
        name: db2u
        ports:
        - containerPort: 50000
          name: db2-server
          protocol: TCP
        - containerPort: 50001
          name: db2-ssl-server
          protocol: TCP
        - containerPort: 50052
          name: db2uapi
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            path: /v1/db2/healthv2?Type=readiness
            port: 50052
            scheme: HTTPS
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 60
        resources:
          limits:
            cpu: "28"
            ephemeral-storage: 8Gi
            memory: 96Gi
          requests:
            cpu: "28"
            ephemeral-storage: 8Gi
            memory: 96Gi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          privileged: false
          runAsUser: 500
        startupProbe:
          failureThreshold: 60
          httpGet:
            path: /v1/db2/healthv2?Type=startup
            port: 50052
            scheme: HTTPS
          initialDelaySeconds: 30
          periodSeconds: 20
          successThreshold: 1
          timeoutSeconds: 60
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /mnt/blumeta0
          name: meta
        - mountPath: /mnt/bludata0
          name: data
        - mountPath: /mnt/backup
          name: backup
        - mountPath: /dev/shm
          name: dshm
        - mountPath: /mnt/local
          name: local
        - mountPath: /run
          name: runvol
        - mountPath: /mnt/blumeta0/configmap/db2u
          name: db2uconfig
          readOnly: true
        - mountPath: /mnt/blumeta0/configmap/db2/registry
          name: db2regconfig
          readOnly: true
        - mountPath: /mnt/blumeta0/configmap/db2/dbm-cfg
          name: db2dbmconfig
          readOnly: true
        - mountPath: /mnt/blumeta0/configmap/db2/db-cfg
          name: db2dbconfig
          readOnly: true
        - mountPath: /secrets/certs/wv-rest
          name: certs-wv-rest
          readOnly: true
        - mountPath: /secrets/sshkeys/db2instusr
          name: sshkeys-db2instusr
          readOnly: true
        - mountPath: /secrets/sshkeys/db2uadm
          name: sshkeys-db2uadm
          readOnly: true
        - mountPath: /secrets/sshkeys/db2uhausr
          name: sshkeys-db2uhausr
          readOnly: true
        - mountPath: /secrets/db2ssl
          name: db2ssl
          readOnly: true
        - mountPath: /db2u/license/
          name: db2u-lic
          readOnly: true
        - mountPath: /secrets/db2instancepwd
          name: instancepassword
          readOnly: true
        - mountPath: /secrets/certs/db2u-api
          name: certs-db2u-api
          readOnly: true
        - mountPath: /secrets/external/zen-service-broker-secret
          name: zen-service-broker-secret
          readOnly: true
        - mountPath: /mnt/blumeta0/configmap/db2/ats
          name: db2u-ats
          readOnly: true
        - mountPath: /secrets/kp
          name: kp-secret-file
          readOnly: true
        - mountPath: /secrets/hivepwd
          name: hive
          readOnly: true
      dnsConfig:
        options:
        - name: ndots
          value: "2"
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - bash
        - -ec
        - /tools/pre-install/db2u_init.sh ${MLN_TOTAL} ${REPLICAS}
        env:
        - name: SERVICENAME
          value: c-db2oltp-wkc-db2u
        - name: DB2TYPE
          value: db2oltp
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: MLN_TOTAL
          value: "1"
        - name: REPLICAS
          value: "1"
        - name: SERVICE_NAME
          value: c-db2oltp-wkc-db2u-internal
        - name: DB2U_API_ENDPOINT
          value: c-db2oltp-wkc-db2u-internal.hptv-prodcloudpak.svc:50052
        - name: DB2U_API_DATABASE_BACKEND
          value: k8s
        - name: DB2U_API_CONFIGMAP_NAME
          value: c-db2oltp-wkc-db2u-api
        - name: DB2U_API_KEY_FILE
          value: /secrets/certs/db2u-api/tls.key
        - name: DB2U_API_CERT_FILE
          value: /secrets/certs/db2u-api/tls.crt
        - name: FORMATION_ID
          value: c-db2oltp-wkc-db2u
        - name: DB2_NGINX_SVC_HOST_NAME
          value: https://internal-nginx-svc:12443
        image: icr.io/db2u/db2u.tools@sha256:647f0e3f235d2bbd177847308f15e01dc4db0ebc735aad3d2913a85e223590e1
        imagePullPolicy: IfNotPresent
        name: init-labels
        resources:
          limits:
            cpu: 500m
            ephemeral-storage: 5Mi
            memory: 256Mi
          requests:
            cpu: 100m
            ephemeral-storage: 1Mi
            memory: 50Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          privileged: false
          readOnlyRootFilesystem: false
          runAsUser: 500
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /mnt/blumeta0
          name: meta
        - mountPath: /mnt/blumeta0/configmap/db2u
          name: db2uconfig
          readOnly: true
      - command:
        - bash
        - -ec
        - /tools/pre-install/set_kernel_params.sh --validate
        env:
        - name: SERVICENAME
          value: c-db2oltp-wkc-db2u
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: MEMORY_LIMIT
          valueFrom:
            resourceFieldRef:
              containerName: db2u
              divisor: "0"
              resource: limits.memory
        - name: SERVICE_NAME
          value: c-db2oltp-wkc-db2u-internal
        - name: DB2U_API_ENDPOINT
          value: c-db2oltp-wkc-db2u-internal.hptv-prodcloudpak.svc:50052
        - name: DB2U_API_DATABASE_BACKEND
          value: k8s
        - name: DB2U_API_CONFIGMAP_NAME
          value: c-db2oltp-wkc-db2u-api
        - name: DB2U_API_KEY_FILE
          value: /secrets/certs/db2u-api/tls.key
        - name: DB2U_API_CERT_FILE
          value: /secrets/certs/db2u-api/tls.crt
        - name: DB2_NGINX_SVC_HOST_NAME
          value: https://internal-nginx-svc:12443
        image: icr.io/db2u/db2u.tools@sha256:647f0e3f235d2bbd177847308f15e01dc4db0ebc735aad3d2913a85e223590e1
        imagePullPolicy: IfNotPresent
        name: init-kernel
        resources:
          limits:
            cpu: 500m
            ephemeral-storage: 5Mi
            memory: 256Mi
          requests:
            cpu: 100m
            ephemeral-storage: 1Mi
            memory: 50Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          privileged: false
          readOnlyRootFilesystem: false
          runAsUser: 500
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /mnt/blumeta0
          name: meta
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext:
        fsGroup: 1000
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
        sysctls:
        - name: kernel.shmmni
          value: "24576"
        - name: kernel.shmmax
          value: "103079215104"
        - name: kernel.shmall
          value: "50331648"
        - name: kernel.sem
          value: 250 2048000 100 24576
        - name: kernel.msgmni
          value: "32768"
        - name: kernel.msgmax
          value: "65536"
        - name: kernel.msgmnb
          value: "65536"
        - name: net.ipv4.ip_local_port_range
          value: 32768 49999
      serviceAccount: account-hptv-prodcloudpak-db2oltp-wkc
      serviceAccountName: account-hptv-prodcloudpak-db2oltp-wkc
      terminationGracePeriodSeconds: 120
      tolerations:
      - effect: NoSchedule
        key: icp4data
        operator: Equal
        value: wkc_db2u
      volumes:
      - name: meta
        persistentVolumeClaim:
          claimName: c-db2oltp-wkc-meta
      - name: data
        persistentVolumeClaim:
          claimName: c-db2oltp-wkc-data
      - name: backup
        persistentVolumeClaim:
          claimName: wkc-db2u-backups
      - emptyDir:
          medium: Memory
        name: dshm
      - emptyDir: {}
        name: local
      - configMap:
          defaultMode: 420
          name: c-db2oltp-wkc-db2uconfig
        name: db2uconfig
      - configMap:
          defaultMode: 420
          name: c-db2oltp-wkc-db2regconfig
        name: db2regconfig
      - configMap:
          defaultMode: 420
          name: c-db2oltp-wkc-db2dbmconfig
        name: db2dbmconfig
      - configMap:
          defaultMode: 420
          name: c-db2oltp-wkc-db2dbconfig
        name: db2dbconfig
      - name: certs-wv-rest
        secret:
          defaultMode: 256
          secretName: c-db2oltp-wkc-certs-wv-rest
      - name: sshkeys-db2instusr
        secret:
          defaultMode: 256
          secretName: c-db2oltp-wkc-sshkeys-db2instusr
      - name: sshkeys-db2uadm
        secret:
          defaultMode: 256
          secretName: c-db2oltp-wkc-sshkeys-db2uadm
      - name: sshkeys-db2uhausr
        secret:
          defaultMode: 256
          secretName: c-db2oltp-wkc-sshkeys-db2uhausr
      - name: db2ssl
        secret:
          defaultMode: 420
          secretName: db2aaservice-internal-tls
      - name: db2u-lic
        secret:
          defaultMode: 256
          secretName: c-db2oltp-wkc-db2u-lic
      - name: instancepassword
        secret:
          defaultMode: 420
          secretName: c-db2oltp-wkc-instancepassword
      - name: certs-db2u-api
        secret:
          defaultMode: 420
          secretName: c-db2oltp-wkc-certs-db2u-api
      - name: zen-service-broker-secret
        secret:
          defaultMode: 420
          secretName: zen-service-broker-secret
      - emptyDir:
          medium: Memory
          sizeLimit: 200Mi
        name: runvol
      - configMap:
          defaultMode: 420
          name: c-db2oltp-wkc-db2u-ats
        name: db2u-ats
      - name: kp-secret-file
        secret:
          defaultMode: 420
          optional: false
          secretName: c-db2oltp-wkc-kp-secret-file
      - name: hive
        secret:
          defaultMode: 420
          optional: false
          secretName: c-db2oltp-wkc-hive
  updateStrategy:
    rollingUpdate:
      partition: 0
    type: RollingUpdate
status:
  availableReplicas: 1
  collisionCount: 0
  currentReplicas: 1
  currentRevision: c-db2oltp-wkc-db2u-5cdcb479ff
  observedGeneration: 13
  readyReplicas: 1
  replicas: 1
  updateRevision: c-db2oltp-wkc-db2u-5cdcb479ff
  updatedReplicas: 1

